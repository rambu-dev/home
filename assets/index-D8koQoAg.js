import{r as f,j as t,l as p,B as N}from"./index-D8V0tws4.js";import{F as k}from"./Field-BvMCW1Tn.js";const j=r=>{const{date:a,events:e=[],className:n=""}=r,l=f.useRef(!1),[s,i]=f.useState(l.current);let c=!1;if(a){const m=new Date;m.setHours(0,0,0,0),a.setHours(0,0,0,0),c=m.getTime()===a.getTime()}return t.jsxs("div",{className:`calendar-day w-[calc(100%/7)] border-base-line border-l border-r-0 last:border-r p-1 md:p-2 ${n}`,children:[t.jsx("div",{className:"flex items-center mb-1",children:t.jsxs("span",{title:`${e.length} posts`,className:`flex flex-wrap px-2 py-1 rounded-lg ${c?"bg-accent text-white":""}`,children:[t.jsxs("span",{className:"hidden md:inline-block",children:[a==null?void 0:a.toLocaleString("en-US",{month:"short"}),"Â "]}),`${a==null?void 0:a.getDate().toString()}`]})}),t.jsxs("div",{className:"events flex md:flex-col flex-wrap",children:[e.map((m,x)=>t.jsx("div",{className:`event mr-1 mb-1 md:mr-0 md:mb-0 md:w-full ${x>1?s?"":"md:hidden":""}`,children:m.body},`event-${a==null?void 0:a.getDate().toString()}-${x}`)),e.length>=3&&t.jsx(t.Fragment,{children:t.jsx("button",{onClick:()=>{l.current=!s,i(!s)},className:`hidden md:inline-block border hover:border-box-dark text-[0.75em] w-full ${s?"border-0 underline":"bg-white"}`,children:s?"less":`more (${e.length-2})`})})]})]})},D=24*60*60*1e3,S=0,u=6,T=r=>Array.from({length:7}).map((a,e)=>new Date(Date.UTC(2021,5,e+6)).toLocaleString(r,{weekday:"short"})),M=(r,a)=>{let e=new Date,n=new Date,l=e.getMonth();switch(r){case"month":e=new Date(a.getTime()),l=e.getMonth(),e.setDate(1),n=new Date(e.getTime()),n.setMonth(l+1),n.setDate(0);const s=e.getDay();s!==S&&(e=new Date(e.getTime()-s*D));const i=n.getDay();i!==u&&(n=new Date(n.getTime()+(u-i)*D));break;case"week":default:e=a;const c=e.getDay();n=new Date(e.getTime()),n.setDate(e.getDate()+(u-c)),e=new Date(n.getTime()-u*D);break}return{month:l,start:e,end:n}},$=r=>{const{className:a="",view:e="month",date:n=new Date,events:l=[]}=r,s=T("en-US"),{start:i,end:c,month:m}=M(e,n),x=f.useCallback(o=>l.filter(h=>{const g=new Date(h.start);return g.getDate()===o.getDate()&&g.getMonth()===o.getMonth()&&g.getFullYear()===o.getFullYear()}),[l]),v=()=>{const o=[];if(!c)return;let h=i,g=0;for(;h.getTime()<=c.getTime()&&!(g>40);)g++,o.push(t.jsx("div",{className:"calendar-grid min-h-[80px] flex flex-grow grow border-base-line border-b border-t-0",children:s.map(y=>{var b;let d={};const w=h;return w.toLocaleString("en-US",{weekday:"short"})===y&&(d.day=w.getDate().toString(),d.date=w,d.events=x(w),h=new Date(h.getTime()+D),w.getMonth()!==m&&(d.className="bg-box-dark")),t.jsx(j,{date:d.date,className:d.className,events:d.events||[]},`calendar-month-day-${(b=d.date)==null?void 0:b.toDateString()}`)})},`calendar-week-row-${o.length}`));return o};return t.jsx("div",{className:`calendar-container h-full ${a}`,children:t.jsxs("div",{className:"calendar min-h-full flex flex-col text-xs",children:[t.jsx("div",{className:"calendar-grid grow-0 flex flex-grow",children:s.map(o=>t.jsx("div",{className:"calendar-day w-[calc(100%/7)] border border-base-line border-r-0 last:border-r p-2",children:t.jsx("span",{className:"font-medium",children:o})},`rb-calendar-weekday-title-${o}`))}),v()]})})},A=()=>{const[r,a]=f.useState({view:"month",date:new Date}),e=n=>{a(l=>{const s={...l};return s.view=n,s})};return t.jsx(p,{title:"Calendar",children:t.jsxs(N,{className:"h-full flex flex-col",children:[t.jsx("div",{className:"flex justify-end items-center",children:t.jsx(k,{className:"w-30",name:"calendar-view",value:r.view,options:[{label:"Daily",value:"daily"},{label:"Month",value:"month"},{label:"Week",value:"week"}],type:"select",onSelect:n=>e(n)})}),t.jsx($,{className:"grow h-auto overflow-hidden",view:r.view,date:r.date})]})})};export{A as default};
