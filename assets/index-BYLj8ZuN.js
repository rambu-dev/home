import{r as f,j as t}from"./index-D3g1sQM6.js";import{B as y}from"./Box-0-IoNxsd.js";import{A as N}from"./AppWithSidebar-Do4tQaN3.js";import{F as k}from"./Field-BpNn_wjD.js";import"./App-DfoM8tBv.js";import"./Text-B7RjwOeu.js";const j=s=>{const{date:a,events:e=[],className:r=""}=s,l=f.useRef(!1),[n,i]=f.useState(l.current);let c=!1;if(a){const m=new Date;m.setHours(0,0,0,0),a.setHours(0,0,0,0),c=m.getTime()===a.getTime()}return t.jsxs("div",{className:`calendar-day w-[calc(100%/7)] border-box-medium border-l border-r-0 last:border-r p-1 md:p-2 ${r}`,children:[t.jsx("div",{className:"flex items-center mb-1",children:t.jsxs("span",{title:`${e.length} posts`,className:`flex flex-wrap px-2 py-1 rounded-lg ${c?"bg-accent-2 text-white":""}`,children:[t.jsxs("span",{className:"hidden md:inline-block",children:[a==null?void 0:a.toLocaleString("en-US",{month:"short"}),"Â "]}),`${a==null?void 0:a.getDate().toString()}`]})}),t.jsxs("div",{className:"events flex md:flex-col flex-wrap",children:[e.map((m,x)=>t.jsx("div",{className:`event mr-1 mb-1 md:mr-0 md:mb-0 md:w-full ${x>1?n?"":"md:hidden":""}`,children:m.body},`event-${a==null?void 0:a.getDate().toString()}-${x}`)),e.length>=3&&t.jsx(t.Fragment,{children:t.jsx("button",{onClick:()=>{l.current=!n,i(!n)},className:`hidden md:inline-block border hover:border-box-dark text-[0.75em] w-full ${n?"border-0 underline":"bg-white"}`,children:n?"less":`more (${e.length-2})`})})]})]})},D=24*60*60*1e3,S=0,u=6,T=s=>Array.from({length:7}).map((a,e)=>new Date(Date.UTC(2021,5,e+6)).toLocaleString(s,{weekday:"short"})),M=(s,a)=>{let e=new Date,r=new Date,l=e.getMonth();switch(s){case"month":e=new Date(a.getTime()),l=e.getMonth(),e.setDate(1),r=new Date(e.getTime()),r.setMonth(l+1),r.setDate(0);const n=e.getDay();n!==S&&(e=new Date(e.getTime()-n*D));const i=r.getDay();i!==u&&(r=new Date(r.getTime()+(u-i)*D));break;case"week":default:e=a;const c=e.getDay();r=new Date(e.getTime()),r.setDate(e.getDate()+(u-c)),e=new Date(r.getTime()-u*D);break}return{month:l,start:e,end:r}},$=s=>{const{className:a="",view:e="month",date:r=new Date,events:l=[]}=s,n=T("en-US"),{start:i,end:c,month:m}=M(e,r),x=f.useCallback(o=>l.filter(h=>{const g=new Date(h.start);return g.getDate()===o.getDate()&&g.getMonth()===o.getMonth()&&g.getFullYear()===o.getFullYear()}),[l]),p=()=>{const o=[];if(!c)return;let h=i,g=0;for(;h.getTime()<=c.getTime()&&!(g>40);)g++,o.push(t.jsx("div",{className:"calendar-grid min-h-[80px] flex flex-grow grow border-box-medium border-b border-t-0",children:n.map(v=>{var b;let d={};const w=h;return w.toLocaleString("en-US",{weekday:"short"})===v&&(d.day=w.getDate().toString(),d.date=w,d.events=x(w),h=new Date(h.getTime()+D),w.getMonth()!==m&&(d.className="bg-box-dark")),t.jsx(j,{date:d.date,className:d.className,events:d.events||[]},`calendar-month-day-${(b=d.date)==null?void 0:b.toDateString()}`)})},`calendar-week-row-${o.length}`));return o};return t.jsx("div",{className:`calendar-container h-full ${a}`,children:t.jsxs("div",{className:"calendar min-h-full flex flex-col text-xs",children:[t.jsx("div",{className:"calendar-grid grow-0 flex flex-grow",children:n.map(o=>t.jsx("div",{className:"calendar-day w-[calc(100%/7)] border border-box-medium border-r-0 last:border-r p-2",children:t.jsx("span",{className:"font-medium",children:o})},`rb-calendar-weekday-title-${o}`))}),p()]})})},L=()=>{const[s,a]=f.useState({view:"month",date:new Date}),e=r=>{a(l=>{const n={...l};return n.view=r,n})};return t.jsx(N,{title:"Calendar",children:t.jsxs(y,{className:"h-full flex flex-col",children:[t.jsx("div",{className:"flex justify-end items-center",children:t.jsx(k,{className:"w-30",name:"calendar-view",value:s.view,options:[{label:"Daily",value:"daily"},{label:"Month",value:"month"},{label:"Week",value:"week"}],type:"select",onSelect:r=>e(r)})}),t.jsx($,{className:"grow h-auto overflow-hidden",view:s.view,date:s.date})]})})};export{L as default};
