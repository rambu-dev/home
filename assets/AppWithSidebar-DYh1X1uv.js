import{l as j,r as p,u as v,j as e,g as $,R as A,o as P,p as R,q as S,P as F,s as L,L as E,F as _}from"./index-DNixIoc9.js";import{B as x,L as q}from"./Box-FW5voN0J.js";import{A as B}from"./App-DoK6gtp6.js";import{T as H}from"./Text-CBLuXI6c.js";const D="_sidebar_dgnuf_1",W="_logo_dgnuf_1",C={sidebar:D,logo:W},k=n=>{var g,N,w,y;const{updateAppConfigs:o}=j(),{item:t,short:s=!1,className:c=""}=n,[a,i]=p.useState(!1),d=v(),l=t.icon,r=m=>window.location.pathname.split("?")[0]===m,u=()=>{d(t.path),window.innerWidth<=760&&o(m=>{const b={...m};return b.theme.sidebar.collapsed=!0,b})},h=r(t.path),f=!!((N=(g=t.childs)==null?void 0:g.filter(m=>r(m.path)))!=null&&N.length);return e.jsxs(e.Fragment,{children:[e.jsxs("li",{onClick:u,className:`relative group/navigation-item item rounded-xs text-primary-light cursor-pointer hover:bg-box-medium flex items-center justify-start px-1 py-1 after:content-none ${h?"item-active bg-box-medium after:!content-['']":""} ${s?"mx-auto w-[fit-content]":""} after:block after:absolute hover:after:!content-[''] after:w-1 after:h-[70%] after:bg-accent after:left-0 after:top-1/2 after:rounded-full after:-translate-1/2 ${c}`,children:[e.jsx("span",{className:"p-2 flex items-center justify-center",children:t.icon?e.jsx(l,{className:"text-[0.75em]"}):e.jsx("span",{className:"w-3"})}),!s&&e.jsx("span",{className:`${h?"text-primary":""} group-hover/navigation-item:text-primary`,children:t.name}),!s&&!f&&((w=t.childs)==null?void 0:w.length)&&e.jsx("span",{onClick:m=>{m.preventDefault(),m.stopPropagation(),i(!a)},className:"text-[calc(1em/1.618)] absolute right-2 p-2 rounded-full hover:bg-box-dark",children:e.jsx($,{className:`${a||f?"scale-[-1]":""} transition-[scale]`})})]}),!s&&(a||f)&&((y=t.childs)==null?void 0:y.length)&&e.jsx("ul",{className:"sub-childs",children:t.childs.map((m,b)=>e.jsx(k,{className:"text-[calc(1em/1.618)] leading-[calc(1em*1.618*var(--text-sm--line-height))]",item:m,short:s},`navigation-child-item-${b}`))})]})},I=n=>{const{className:o="",short:t=!1,menu:s=[]}=n;return s.length?e.jsx("div",{className:`navigation text-sm ${o}`,children:e.jsx("ul",{children:s.map((c,a)=>e.jsx(A.Fragment,{children:e.jsx(k,{item:c,short:t})},`navigation-item-${a}`))})}):null},T=()=>{var i,d;const{configs:n,updateAppConfigs:o}=j(),t=v(),s=()=>{o(l=>{const r=JSON.parse(JSON.stringify(l));return r.theme.sidebar.collapsed=!r.theme.sidebar.collapsed,r})},c=P.filter(l=>{var r;return!!((r=l==null?void 0:l.meta)!=null&&r.menu)&&l.meta.menu.indexOf("main")>=0});c.sort((l,r)=>{var f,g;const u=((f=l==null?void 0:l.meta)==null?void 0:f.order)||0,h=((g=r==null?void 0:r.meta)==null?void 0:g.order)||0;return u>h?1:-1});const a=!!n.theme.sidebar.collapsed;return e.jsxs(x,{node:"aside",elevation:"overlay",className:`${C.sidebar} flex flex-col border-r-1 border-box-medium absolute left-0 bottom-0 md:relative w-full h-full ${a?"md:w-[max-content]":"md:w-[var(--rb-sidebar-width)]"} md:h-full ${(d=(i=n.theme)==null?void 0:i.sidebar)!=null&&d.collapsed?"-translate-x-full":""} transition-[translate,width] md:translate-x-0`,children:[e.jsx(x,{className:`h-[var(--rb-header-height)] bg-transparent mb-2 ${a?"aspect-square":""}`,children:e.jsx("div",{className:"h-full overflow-hidden",onClick:()=>t("/"),children:e.jsx(q,{className:C.logo,short:a})})}),e.jsx(x,{className:"bg-transparent grow",children:e.jsx(I,{menu:c,className:"-mx-2",short:a})}),e.jsx("button",{onClick:s,className:"block w-[max-content] cursor-pointer p-1 text-xs text-primary-light rounded-full aspect-square hover:bg-box-light mx-auto mt-4",children:a?e.jsx(R,{}):e.jsx(S,{})})]})},O=n=>{const{className:o="",text:t,url:s,src:c,alt:a="Photo",srcset:i,square:d=!1}=n,l=v();return e.jsx("div",{onClick:()=>!!s&&l(s),className:`cursor-pointer flex items-center justify-center image-container aspect-square ${d?"rounded-sm":"rounded-full"} overflow-hidden bg-primary ${o}`,children:c?e.jsx("img",{src:c,alt:a,srcSet:i}):e.jsx("span",{className:"text-contrast",children:t})})},z=n=>{const{className:o,children:t,onClose:s,top:c=!1}=n,a=p.useRef(null),i=p.useRef(null),d=()=>{if(!i.current||!a.current)return;const r=a.current.parentElement;if(!r)return;const u=r.getBoundingClientRect();c?i.current.style.bottom=`${window.innerHeight-u.top}px`:i.current.style.top=`${u.bottom}px`,i.current.style.right=`${window.innerWidth-u.right}px`},l=p.useCallback(r=>{r&&(i.current=r,d())},[]);return p.useEffect(()=>{const r=u=>{if(!i.current)return;const h=u.target;typeof s=="function"&&h&&h!=i.current&&!i.current.contains(h)&&s()};return window.addEventListener("resize",d),window.document.addEventListener("click",r),()=>{window.removeEventListener("resize",d),window.document.removeEventListener("click",r)}},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:a,className:"hidden"}),e.jsx(F,{children:e.jsx("div",{ref:l,className:`fixed border border-box-medium elevation-overlay rounded-xs py-2 px-4 bg-box-base ${o} translate-y-[10px] animate-slide-in`,children:t})})]})},J=()=>{const[n,o]=p.useState(!1);return e.jsxs("div",{className:"mx-2",children:[e.jsxs("div",{onClick:()=>o(!n),className:"notifications relative cursor-pointer text-primary-light hover:text-primary p-2 hover:bg-box-medium rounded-full",children:[e.jsx(L,{}),e.jsx("span",{className:"number absolute right-0 top-0 text-xs bg-accent-2 text-white rounded-full w-4 aspect-square flex items-center justify-center h-auto",children:"2"})]}),n&&e.jsx(z,{className:"!rounded-sm",onClose:()=>o(!1),children:e.jsx("ul",{className:"text-xs min-w-[280px] mr-2",children:e.jsx("li",{children:"Hello world"})})})]})},Q=()=>e.jsxs("div",{className:"ml-auto flex items-center",children:[e.jsx(J,{}),e.jsx(E,{to:"/user",children:e.jsx(O,{className:"w-10",text:"H"})})]}),U=({className:n=""})=>{const{updateAppConfigs:o}=j(),t=()=>{o(s=>(s.theme.sidebar.collapsed=!s.theme.sidebar.collapsed,s))};return e.jsxs(x,{node:"header",className:`h-[var(--rb-header-height)] flex items-center ${n}`,children:[e.jsx("button",{onClick:t,className:"md:hidden h-full self-start aspect-square flex items-center justify-center cursor-pointer hover:bg-box-dark",children:e.jsx(_,{})}),e.jsx(Q,{})]})},Y=n=>{const{children:o,title:t,beforeTitle:s=null,afterTitle:c=null}=n;return e.jsx(B,{children:e.jsxs(x,{className:"flex h-full overflow-hidden",children:[e.jsx(T,{}),e.jsxs(x,{className:"grow flex flex-col overflow-hidden",children:[e.jsx(U,{className:"mb-2 border-b border-box-medium"}),!!t&&e.jsx(x,{children:e.jsxs("hgroup",{className:"sticky top-0 mb-2",children:[s,e.jsx(H,{level:"h1",className:"!py-0",children:t||""}),c]})}),e.jsx(x,{node:"main",className:"grow overflow-y-auto",children:o})]})]})})};export{Y as A,z as D};
