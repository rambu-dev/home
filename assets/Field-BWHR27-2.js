import{r as a,j as t,i as J,f as K}from"./index-udEVNCrR.js";const P=F=>{var O;const{className:E="",disabled:L=!1,defaultValue:j="",value:o,name:$,id:R,placeholder:m="",label:x,type:p="text",description:v,tooltip:T,onSuccess:y,validate:N,options:h=[],multiple:r=!1,allowFiler:H=!1,autoComplete:V,showDefaultSelectLabel:D=!0,onSelect:C,after:k,short:q=!1}=F,i=a.useRef(null),c=a.useRef(null),[b,_]=a.useState(""),[S,z]=a.useState(q),[l,d]=a.useState(!r&&j?j:[]),[g,f]=a.useState(!1),A=e=>{const s=e.target.value;typeof N=="function"&&!N(s)||(typeof y=="function"&&y(s),o===void 0&&d(s))},B=e=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{c.current=null,_(e.target.value.trim().toLowerCase())},300)},G=(e,s)=>{typeof C=="function"&&C(e,s),o===void 0&&d(u=>{let n;return r?(n=[],u&&(typeof u=="string"?n.push(u):n=[...u]),n.indexOf(e)>=0?n=n.filter(I=>I!=e):n.push(e)):n=e,n}),r||f(!1)};a.useEffect(()=>{o!==void 0&&o!==l&&d(o)},[o,l]),a.useEffect(()=>{const e=s=>{!r||!i.current||s.target!==i.current&&!i.current.contains(s.target)&&f(!1)};return window.document.addEventListener("click",e),()=>{window.document.removeEventListener("click",e)}},[r]);const w=p==="select"?"hidden":p;return t.jsxs("div",{ref:i,className:`form-field flex flex-wrap items-start mb-2 ${E}`,children:[!!x&&t.jsx("label",{className:"min-w-[10ch] font-light mr-2 py-[4px]",children:x}),t.jsxs("div",{className:"form-field-input relative flex flex-col grow",children:[t.jsxs("span",{className:`${w==="hidden"?"":"border border-box-medium rounded-sm flex justify-end"}`,children:[t.jsx("input",{autoComplete:V,id:R,value:l,placeholder:m||x,disabled:L,onChange:A,className:`grow outline-none py-[4px] placeholder:italic leading-[1.618em] transition-[width] px-2 ${S?"w-0 !px-0":"w-1/2"}`,type:w,name:$,title:T}),!!k&&w!=="hidden"&&t.jsx("span",{onClick:()=>z(!S),className:"text-xs self-stretch aspect-square flex items-center justify-center px-[1em] cursor-pointer",children:k})]}),p==="select"&&t.jsxs(t.Fragment,{children:[t.jsxs("span",{onClick:()=>f(!g),className:"form-field--options-label cursor-pointer w-full break-all overflow-hidden text-ellipsis py-1 px-2 text-center border border-box-medium hover:bg-box-medium rounded-sm flex items-center leading-[1.618em]",children:[t.jsx("span",{className:"inline-block min-h-[1.618em]",children:l?typeof l=="string"?(O=h.filter(e=>e.value===l))==null?void 0:O[0].label:h.filter(e=>l.indexOf(e.value)>=0).map(e=>e.label).join(", "):m}),t.jsx(J,{className:`ml-auto text-[0.618em] ${g?"scale-[-1]":""} transition-[scale]`})]}),g&&t.jsxs("span",{className:"form-field--options elevation-raised absolute w-full left-0 top-full border border-box-medium bg-box-base rounded-sm",children:[D&&t.jsx("span",{onClick:()=>{!r&&d(""),f(!1)},className:"cursor-pointer text-center hover:bg-box-medium px-2 flex items-center",children:m}),H&&t.jsx("span",{className:"flex items-center px-2 py-1",children:t.jsx("input",{placeholder:"...filter",type:"text",className:"px-2 py-1 outline-none border border-box-medium rounded-sm grow leading-[1.618em]",onChange:B})}),h.filter(e=>!b||e.label.toLowerCase().indexOf(b)>=0||e.value.toLowerCase().indexOf(b)>=0).map((e,s)=>t.jsxs("span",{onClick:()=>G(e.value,s),className:`cursor-pointer w-full break-all text-center  hover:bg-box-medium ${!!l&&(l.indexOf(e.value)>=0||l===e.value)&&"bg-box-medium"} py-2 px-2 text-start flex items-center justify-start text-ellipsis`,children:[e.label,!!l&&(l.indexOf(e.value)>=0||l===e.value)&&t.jsx(K,{className:"text-[0.618em] ml-auto"})]},`option-select-${s}`))]})]}),!!v&&t.jsx("p",{className:"my-2 w-full text-[1em/1.618] text-primary-light font-light",children:v})]})]})};export{P as F};
